
# テスト仕様書

## 0. 概要 
- **システム名**: お弁当注文システム
- **作成日**: 2025-3-3 
- **作成者**: 大隈　慶
- **バージョン**: 1.0 

<details><summary>1. テストの目的と品質基準</summary>

## 1. テストの目的と品質基準

### 1.1 テストの目的

- 開発物が以下の品質基準を満たすかを確認すること

### 1.2 品質方針 
- ユーザー（発注者）と店舗（受注者が）の両方でできる限り停止しないシステムをめざず。
- セキュリティについてはユーザー情報と店舗の注文情報は特殊な方法を用いない限り漏洩しないようにする。

- そのために以下を確認（テスト）する
    - 機能要件として定義した各種機能が期待通りに動作すること
    - 非機能要件として定義した各種非機能が期待通りに動作すること（条件を満たすこと）
- 特に下記の非機能要件を重視
    - 可用性
    - 性能
    - セキュリティー
    - ユーザビリティ
    - ブラウザ対応確認

</details>

<details><summary>2 テストの種類・目的・方法</summary>

### 2.1 テストの種類・目的・方法
- 機能テスト・・・単体テストと結合テストを実施する。
    1. 単体テスト
    - アプリの機能をテストする
    - こちらは開発プログラマが実施するので省略する。
    2. 結合テスト
    - アプリの機能をテストする
    - 開発・検証・運用の3段階において実施する。
    - 開発はアプリをテストサーバー起動後に実施して、検証と運用はクラウドにデプロイ後に実施する予定である。
    - ユーザービリティおよびデザイン面のチェックも併せて実施する。
- 非機能テスト
    - アプリの機能以外のテストする
    - 可用性テスト・性能テスト・セキュリティテスト・ユーザービリティ確認・ブラウザ対応確認を実施する。
    - 上記テストは結合テスト時に同時に実施する。
    - 可用性テストとは、クラウド上での稼働率を99％以上であることを確認する。
    - 性能テストとは、データが多い場合やアクセス多発時の影響を調べたり、速度低下に注意する。
    - セキュリティテストとは、異常なログイン・アクセスにより、パスワードの漏洩などシステム情報が盗まれるか、システムが破壊することができるかをテストする。
    - ユーザービリティテストは、システムに対してユーザーが使いやすいか、見やすいか、わかりやすいか、引っかかるところはないか、デザインはどうかといったユーザー視点での主観的な不具合や障害を検出する。
    - ブラウザ対応確認では、Webアプリはブラウザで表示するので、さまざまなブラウザで正常にアプリ画面が表示できるかを確認する。

### 2.2 ユーザー紹介 
- システムにアクセスするユーザーは４種類である。

1. 通常のユーザー
    - 一般の注文者(user)、発注者
    - 個別にスマホを使ってお弁当を注文する
    - スマホでNFCタグを読み取りシステムにアクセスして、お弁当を注文する。
    - サーバーにIDとパスワードの登録がない場合は初めに新規登録をする。その後注文を確定する。すでにある場合はそのまま注文を確定する。
2. 会社代表ユーザー
    - 代表注文者(maanger)、代表発注者
    - 会社単位で社内の注文を取りまとめ、店舗にお弁当を注文する。
    - ポータル画面より会社代表ユーザーでログインすると、専用の会社代表ユーザー画面に遷移する。その会社の本日の注文状況を確認後、注文をまとめてFAX送信をしたりする。
3. 店舗ユーザー
    - お弁当屋(shopuser)、受注者
    - ユーザー・会社代表ユーザーからの注文を確認・処理する。
    - ポータル画面より店舗ユーザーでログインすると、専用の店舗ユーザー画面に遷移する。本日の受注状況（全会社にわたる）を表示する。処理済の注文に対しては、チェックを入れることができる。
4. 管理者ユーザー
    - 管理者ユーザー(admin)、管理者
    - システムの管理・メンテを行う。
    - ポータル画面より管理者ユーザーでログインすると、専用の管理者ユーザー画面に遷移する。すべての機能・画面にアクセスできる。

</details>

<details><summary>2.3 テスト内容</summary>

### 2.3 テスト内容

- ＮＦＣ読み込みからのポータル表示
    - スマホでNFCタグを読み込み、ポータル画面が表示するか？
- ポータルでのログイン処理
- ロール別
    1. 一般ユーザー・注文者(user)　成功
    2. 一般ユーザー・注文者(user)　失敗
    3. 会社代表ユーザー・代表注文者(maanger)　成功
    4. 会社代表ユーザー・代表注文者(maanger)　失敗
    5. 店舗ユーザー(shopuser)　成功
    6. 店舗ユーザー(shopuser)　失敗
    7. 管理者ユーザー(admin)　成功
    8. 管理者ユーザー(admin)　失敗
- 当日２回目注文の失敗
    9. 一般ユーザー(user)が当日２回目ログインで、警告が表示されて注文できない。一般ユーザー(user)のみ当てはまる。
    10. 管理者ユーザー(admin)が一般ユーザー(user)のCookieを消すことができるか？（未実装）
- 注文可能曜日の設定
    - 曜日単位で設定する。
    - 注文可能曜日は、毎週月・火・水の3日に限られる。
    - 金・土 はカレンダーにメニューは載っているが販売していない。
    - 木曜は弁当がメニューは載っていないので、注文できない。
    - 休日を挟んだ場合は、休日翌日の注文しかできない。
    - 例　翌日水曜が休日の場合は、火曜日注文で木曜配達になる。

| 曜日 | 日 | 月 | 火 | 水 | 木 | 金 | 土 |
|-------|-------|-------|-------|-------|-------|-------|-------|
| menu | ✕ | 〇 | 〇 | 〇 | ✕ | 〇 | ✕ |
| 注文 | ✕ | １ | ２ | ✕ | ✕ | ３ | ✕ |
| 配達 | ✕ | ３ | １ | ２ | ✕ | ✕ | ✕ |

- 品目は日替弁当の1種類のみ。

- 会社代表ユーザー
- 注文は職業訓練指導員である脇坂さんに、昼休み終わり１３時前に連絡する。もしくは聞いてくるのに答えて予約とする。
- 注文は翌日の注文しかできない。
- 注文の締切は前日の14時まで。


- 注文キャンセル
- 注文キャンセルは当日10時半まで電話すること。
- 注文キャンセルの際は、キャンセル料として300円を後日徴収する。
- 注文キャンセル期限以降は、注文キャンセルができない
- 配達当日10時半以降の場合は、キャンセル不可で450円かかる。


</details>

<details><summary>2.4 テストに含めないもの</summary>

### 2.4 テストに含めないもの
1. サーバ起動操作
    - 理由： 環境が変化するため
2. 当日２回目注文の失敗は、通常のユーザー(User)のみとする。
    - 理由： 注文は通常のユーザーのみだから。
- NFCのうち、”NFCタグとの連携機能（パッシブ方式）”を用いて注文を処理する。
- 利用イメージとして、利用者が個人のスマホをNFCタグにかざすことで、NFCタグ内のメモリに記録された URLおよびアクション情報を利用者のスマホが読み取り、自動的に注文管理サーバ（仮）に注文を送信する。
- NFCタグは2種類のタグを用意する。
    - 注文タグ
        - 日替わり弁当の注文合計件数を１件追加する
    - キャンセルタグ
        - 注文合計件数から１件削除する。
- NFCタグ使用による注文の成功・失敗の結果は、それぞれ利用者のWeb画面で確認することができる。
- 注文結果は注文者のスマホのWebブラウザに以下のように表示する
    - 注文に成功した場合
        - 成功の旨の文面を表示する
        - 「あなたの注文を承りました」「〇月✕日　日替弁当 450円 1件」
    - 注文に失敗した場合
        - 失敗の旨の文面を表示する。
        - 「注文に失敗しました。もう一度注文を実行して下さい」
- 注文管理サーバの注文情報は、受注者側に配置してあるタブレット端末に表示する注文管理画面を確認することで現在の注文状況を確認することができる。
- 将来NFCタグ は用途の変更を可能とする。
    - 例 注文タグを１種類でなく、利用者人数分用意するなど。
</details>



<details><summary>6. リスク管理</summary>

## 6. リスク管理 

- プロジェクトに関連するリスクとその対応策を記載します。 
### 6.1 リスク対応
- 基本的に対応可能日は平日のみとする。土日祝日は対応しない。
</details>


<details><summary>7. スケジュール </summary>

## 7. スケジュール 

- 開発開始日: 2024-12-16 
- 開発終了日: YYYY-MM-DD 
- マイルストーン: マイルストーンの一覧 
1. 要件定義作成完了     2024-12-16
2. 暫定仕様書作成完了   2024-12-20
3. 仕様書レビュー       2024-12-20
4. 暫定仕様書修正完了   2024-12-20
5. 実装検証開始         2024-12-27 
6. 仕様書レビュー2回目  2024-12-28

</details>


<details><summary>99. 付録</summary>

## 99. 付録

- その他の参考資料や追加情報を記載します。
### 要件定義書ドラフト
https://chatgpt.com/share/675fa125-e804-800b-99cf-6820389efba2
### セキュリティ
[JWT認証の流れを理解する](https://qiita.com/asagohan2301/items/cef8bcb969fef9064a5c)

プロトタイプtestサイト
https://kei-okuma1216.github.io/Obento-Test/

</details>
<br>
以上
